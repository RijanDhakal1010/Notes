- [The ncbi manual for enterez](https://www.ncbi.nlm.nih.gov/books/NBK3837/)
- [The ncbi bookshelf](https://www.ncbi.nlm.nih.gov/books/) might be a good resource to get information on biological material.
- # General Enterez manual notes
- This manual is separated by the various Enterez tools and databases.
- [[Bioproject]]
- [[Elink]]
- # Entrez Manaul
- This section of the notes follow the entrez Manual [readme.pdf](https://www.ncbi.nlm.nih.gov/books/NBK179288/). The manual is inside the  folder downloaded with `curl`. Seem the manaul might be on this [web-page](https://www.ncbi.nlm.nih.gov/books/NBK179288/) as well.
- ## Introduction
- ### Programmatic access
- The manual says "Each program also has a `-help` command that prints detailed information about available arguments." So, turns out they respond to `-help` and not `--help`.
- ### Navigation function
- It says "Efetch downloads selected records or reports in a style designated by" but also says records and it is not clear if records mean genomic data or not.
- ### Accessory programs
- "Nquire retrieves data from remote servers with URLs constructed from command line arguments" for example "nquire -url http://www.wikidata.org/entity Q22679758" not quite sure how I can get the "Q22679758".
- ## Discovery by navigation
- MeSH terms is the algorithm used to gauge the similarity across PubMed articles.
- ## XML Data Extraction
- The output from esearch comes in XML format which makes it navigable.
- The `-pattern` command partitions an XML stream by object name and makes the sub-objects accessible.
	- For example `-pattern ENTREZ_DIRECT` makes everything with `ENTREZ_DIRECT` accessible.
	- ```XML
	  <ENTREZ_DIRECT>
	    <Db>assembly</Db>
	    <WebEnv>MCID_63dddde066032014172f336d</WebEnv>
	    <QueryKey>1</QueryKey>
	    <Count>2</Count>
	    <Step>1</Step>
	  </ENTREZ_DIRECT>
	  ```
- ## Format Customization
- It is possible to customize the output generated by entrez using the following flags to the `-xtract` tool.
	- `-ret` to change the line separator.
	- `-tab` to change the custom in-line separation.
	- `-sep` to separate multiple elements within the same instance.
	- `-def` insets place-holders for missing outputs
	- `-wrp`, `-enc`,`-pkg` are used to extend the output with XML.
		- For example, `-wrp Word` can be used to produce `-pfx "<Word>" -sep "</Word><Word>" -sfx "</Word>"`
- ## Element Variants
- The following commands can be used to eliminate the inconvenience of having to write post-processing scripts to perform otherwise trivial tasks on extracted data:
	- positional processing
	  collapsed:: true
		- `-first`
		- `-last`
	- numeric
	  collapsed:: true
		- `-inc`
		- `-sum`
		- `-max`
		- `-avg`
	- text
	  collapsed:: true
		- `-upper`
		- `-title`
		- `-words`
	- sequence
	  collapsed:: true
		- `-revcomp`
		- `-fasta`
		- `-0-based`
		-
- The initial `-element` prefix shortcuts `#` and `%` are redirected to `-num` and `-len`.
- # Building a one-liner
- This section of the manual makes this one liner `esearch -db pubmed -query "lycopene cyclase" | elink -related | elink -target protein | efilter -organism mouse -source refseq | efetch -format fasta` but it is not working smoothly.
- Working through the build-up of the one-liner:
	- `esearch -db pubmed -query "lycopene cyclase"`
		- ```XML
		  <ENTREZ_DIRECT>
		    <Db>pubmed</Db>
		    <Count>290</Count>
		    <Query>lycopene cyclase</Query>
		  </ENTREZ_DIRECT>
		  ```
	- `esearch -db pubmed -query "lycopene cyclase" | elink -related`
		- ```XML
		  <ENTREZ_DIRECT>
		    <Db>pubmed</Db>
		    <Count>18173</Count>
		    # there are the 18173 lines here for the ids
		  <ENTREZ_DIRECT>
		  ```
	- `esearch -db pubmed -query "lycopene cyclase" | elink -related | elink -target protein`
		-
- # Example from the manual
- The following example is built on in the manual (from section to section):
	- `esearch -db pubmed -query "lycopene cyclase" | elink -related | elink -target protein | efilter -organism mouse -source refseq | efetch -format fasta`
		- This works and generates fastas after a series of errors.
		-
-